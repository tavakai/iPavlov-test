{"version":3,"sources":["contexts/CurrentUserContext.js","components/Validator/Validator.js","components/Modal/Modal.js","components/Profile/Profile.js","images/logo.png","components/Login/Login.js","components/Register/Register.js","utils/MainApi.js","components/ProtectedRoute/ProtectedRoute.js","components/App/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","useFormWithValidation","useState","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","event","target","name","value","validationMessage","closest","checkValidity","Modal","isActive","responseStatus","message","setMessage","useEffect","className","Profile","profileEditFn","signOut","modal","validateForm","contextUser","useContext","btnDisabled","setBtnDisabled","userName","setUserName","email","userEmail","setEmail","editing","setEditing","undefined","action","id","onSubmit","e","preventDefault","type","required","minLength","maxLength","placeholder","onChange","readOnly","pattern","disabled","form","onClick","Login","handleSubmit","to","src","logo","alt","autoComplete","password","Register","base_url","headers","Accept","getUserProfile","fetch","method","credentials","then","res","_getResponseData","response","ok","json","Promise","reject","status","ProtectedRoute","Component","component","props","loggedIn","App","currentUser","setCurrentUser","setLoggedIn","setModal","setResponseStatus","history","useHistory","location","useLocation","mainApi","push","pathname","catch","err","Provider","exact","path","data","body","JSON","stringify","setTimeout","console","log","user","token","Error","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.63e9aa8b.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React, { useCallback } from \"react\";\r\n\r\n//хук управления формой\r\nexport function useForm() {\r\n  const [values, setValues] = React.useState({});\r\n\r\n  const handleChange = (event) => {\r\n    const target = event.target;\r\n    const value = target.value;\r\n    const name = target.name;\r\n    setValues({...values, [name]: value});\r\n  };\r\n  return {values, handleChange, setValues};\r\n}\r\n\r\n//хук управления формой и валидации формы\r\nexport function useFormWithValidation() {\r\n  const [values, setValues] = React.useState({});\r\n  const [errors, setErrors] = React.useState({});\r\n  const [isValid, setIsValid] = React.useState(false);\r\n\r\n  const handleChange = (event) => {\r\n    const target = event.target;\r\n    const name = target.name;\r\n    const value = target.value;\r\n    setValues({...values, [name]: value});\r\n    setErrors({...errors, [name]: target.validationMessage });\r\n    setIsValid(target.closest(\"form\").checkValidity());\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n      setValues(newValues);\r\n      setErrors(newErrors);\r\n      setIsValid(newIsValid);\r\n    },\r\n    [setValues, setErrors, setIsValid]\r\n  );\r\n\r\n  return { values, handleChange, errors, isValid, resetForm };\r\n}","import React, {useState, useEffect} from 'react';\r\n\r\nconst Modal = ({isActive, responseStatus}) => {\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    if(responseStatus === 409) {\r\n      setMessage(\"Пользователь с таким email уже существует\")\r\n    } else if(responseStatus === 400) {\r\n      setMessage(\"При регистрации пользователя произошла ошибка\")\r\n    } else if(responseStatus === 401) {\r\n      setMessage(\"Неправильный логин или пароль\")\r\n    } else if(responseStatus === 200) {\r\n      setMessage('Данные успешно сохранены')\r\n    } else if(responseStatus === 201) {\r\n      setMessage('Вы успешно зарегистрировались')\r\n    }\r\n  }, [responseStatus])\r\n \r\n  return (\r\n    <section className={`modal ${isActive ? \"modal_active\" : \"\"}`}>\r\n      <div className={`${responseStatus === 200 || responseStatus === 201 ? 'modal__content_success' : 'modal__content'}`}>\r\n        <p className=\"modal__message\">{message}</p>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Modal;","import React, { useState, useEffect, useContext } from 'react';\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\nimport { useFormWithValidation } from '../Validator/Validator';\r\nimport Modal from '../Modal/Modal';\r\n\r\nconst Profile = ({profileEditFn, signOut, modal, responseStatus}) => {\r\n  const validateForm = useFormWithValidation();\r\n  const contextUser = useContext(CurrentUserContext);\r\n  const [btnDisabled, setBtnDisabled] = useState(true);\r\n  const [userName, setUserName] = useState(contextUser.name);\r\n  const [userEmail, setEmail] = useState(contextUser.email);\r\n  const [editing, setEditing] = useState(false);\r\n\r\n  const handleUserNameChange = (e) => {\r\n    setUserName(e.target.value);\r\n    validateForm.handleChange(e);\r\n  }\r\n  const handleEmailChange = (e) => {\r\n    setEmail(e.target.value);\r\n    validateForm.handleChange(e);\r\n  }\r\n  const handleSubmitForm = (e) => {\r\n    e.preventDefault();\r\n    profileEditFn({\r\n      name: userName,\r\n      email: userEmail\r\n    })\r\n  }\r\n  const handleEditProfile = (e) => {\r\n    e.preventDefault();\r\n    setEditing(true);\r\n  }\r\n  const cancelEditing = (e) => {\r\n    e.preventDefault();\r\n    setEditing(false);\r\n  }\r\n  useEffect(() => {\r\n    contextUser.name !== undefined && setUserName(contextUser.name);\r\n    contextUser.email !== undefined && setEmail(contextUser.email);\r\n    setEditing(false);\r\n  }, [contextUser]);\r\n\r\n  useEffect(() => {\r\n    if(userName !== contextUser.name || userEmail !== contextUser.email) {\r\n      setBtnDisabled(false);\r\n    } else {\r\n      setBtnDisabled(true);\r\n    }\r\n  }, [userName, userEmail, contextUser.name, contextUser.email])\r\n\r\n  useEffect(() => {\r\n    if(!editing) {\r\n      setUserName(contextUser.name)\r\n      setEmail(contextUser.email)\r\n    }\r\n  }, [editing]);\r\n  return (\r\n    <>\r\n    <section className=\"profile\">\r\n      <div className=\"profile__content\">\r\n        <form action=\"#\" className=\"profile__form\" id=\"profile__edit\" onSubmit={handleSubmitForm}>\r\n          <fieldset className=\"profile__fieldset\">\r\n            <legend className=\"profile__legend\">\r\n              <h2 className=\"profile__title\">Привет, {contextUser.name}</h2>\r\n            </legend>\r\n            <div className=\"profile__inputs\">\r\n              <span className=\"profile__input-title\">Имя</span>\r\n              <input\r\n                type=\"text\"\r\n                required\r\n                className=\"profile__input profile__input_name\"\r\n                minLength=\"2\"\r\n                maxLength=\"30\"\r\n                name=\"name\"\r\n                placeholder=\"Введите имя\"\r\n                value={userName}\r\n                onChange={handleUserNameChange}\r\n                readOnly={editing ? null : 'readonly'} />\r\n              <span className={`profile__error profile__error_name ${editing ? '' : 'profile__error_off'}`}>{validateForm.errors.name}</span>\r\n              <hr className=\"profile__line\" />\r\n              <span className=\"profile__input-title\">E-mail</span>\r\n              <input\r\n                type=\"email\"\r\n                required\r\n                className=\"profile__input profile__input_email\"\r\n                placeholder=\"Введите почту\"\r\n                value={userEmail}\r\n                onChange={handleEmailChange}\r\n                pattern=\"[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}\"\r\n                readOnly={editing ? null : 'readonly'}\r\n                name=\"email\"\r\n                />\r\n                <span className={`profile__error profile__error_email ${editing ? '' : 'profile__error_off'}`}>{validateForm.errors.email}</span>\r\n            </div>\r\n          </fieldset>\r\n          <span className=\"profile__notification-text\">При обновлении профиля произошла ошибка.</span>\r\n          {editing ? (\r\n            <>\r\n              <button\r\n              className={`profile__btn_submit ${validateForm.isValid && !btnDisabled ? 'profile__btn_submit-active' : ''}`}\r\n              disabled={validateForm.isValid && !btnDisabled ? '' : 'disabled'}\r\n              type=\"submit\"\r\n              form=\"profile__edit\">Сохранить</button>\r\n              <button\r\n                className={`${!editing ? \"profile__signout_hide\" : \"profile__signout_show\"}`}\r\n                type=\"button\"\r\n                onClick={cancelEditing}>\r\n                Отменить\r\n              </button>\r\n            </>\r\n          ) : (\r\n            <button className=\"profile__btn\" type=\"button\" onClick={handleEditProfile}>Редактировать</button>\r\n          )}\r\n          <button\r\n            className={`${editing ? \"profile__signout_hide\" : \"profile__signout_show\"}`}\r\n            type=\"button\"\r\n            onClick={signOut}>\r\n            Выйти из аккаунта\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </section>\r\n    <Modal isActive={modal} responseStatus={responseStatus} />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Profile;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQgSURBVHgBvVg9TBRBFH6znIo/6Gli/Cu4qwQ1AQt/Ok5N1E6pbDRIZWGhFkYTC4bSzmtshdhqhE4L5eg0FhyJIla3FBBI/FkEFRFufN/ej3fH7swsHHzJ3u3P7M43b958770RtAocy8kUOaItr1RKELXzEVd84Bmfe3zu4nCEyOTzangsKbMUEcK2YSIn49scuiUUXcclRYNLQshlJjmelK7NC1bEjkzIHkfR7ZJV1gBXCeoba5a9poZaYi05mWgQ9IJP26m+cJcVndFZzwl7cHSitysmaGQdSAEY8EhrTl4OayDCSJFSfbQREOL6x+ae/hW3a29gFE5h+jYOAeSqiMGnMH11cPKo8Njnjlf6XKzyKc/7kC2pJqeRTmxpprPbWulkYzMdjBVem8sv0PjiNL3+NU5vfn+mqSXP5nPx4iI7XrpRttgxlgSlSNp85erO03RzV4dPzoSB+Sw9nh22Isj997IYyzKxoiwMkUE4QeT+7gt0aUe0hTrJpLpn+m3IeZsUJbNJ6flywT8pslDzJ/u6IpMCDvE0Pz9wg1o27zc1jS8S3S5ywqKgHtMb99hSFh8OBayd3nvFOP3Mpcv/P5KT7aIgpKEAoWc84iC8X3B9H4LDw/HRFlY9t/VweUFU4umPt/Tw+yvSAVGBJUulyABYKwgPvg76vgNyIAWA4MNvL0N96hovHKPVSLU7SogOXSOM+kRjYsV9jHpwPjybCXN4DGCnkZhIsZ7qnR5aVQt0hikxAeTOT6YpKti12uD8CV2jIIcfmI+c90VFHMS0Sh/kwON/Z2idEXdoFWgSW2i9AWJaOS6ttkociq17jPeMxIKmLWiV1hlujLOJrG5lvuEs4X6NjoHYtaZT9HTuHekA/0QYq7QwZgAyAr0LAwfzCUcoNUwaQBogoLW4t+eiTy4KKQDiGuQeVcRIZVjHRFaRHgg5TwKmD+QOs5wM/hwthyQQury9LVThITWThixjiUTGT3uOujJHBj1DWEJna8FUMRroiKFQHkvIZCG7UNRv+ihCkM4vTCj5lslaggtj/PvEOL9+RIbVCeDDq1F9G0sBsBaqdZw34Gc6nVnYdyu1laNnSvfiolry8/jJ5VlqZd+ySa0RU+9+eW6X+ytKf0rKAZxWVUnsa5EK3ELe1cIOv6scU0vFyPs/Ez4p0wr8z6ngW6XrqiqJE7TOhkLSaCXtSHsG6xPQvTwnh5U3qmIl6joWtzu0wWBS3bX7GCuCOJdPfUyumzYI6KvkV5UIzC5AjredOslipa4BHkihr6CHxm0oLgqGhEVpFwWIzzx9nbptKKuNO97alHkuq+pA0GMxT38oVts6WG91+tZDYcw16CoIuogu8yzkLlfZNi9YE6sEalHHER3FzeEEFY6SxKBjbBBnsTnMS26ULZShiPgHdOfIsn+V8ksAAAAASUVORK5CYII=\"","import React from 'react';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport logo from '../../images/logo.png'\r\nimport Modal from '../Modal/Modal';\r\nimport { useFormWithValidation } from '../Validator/Validator';\r\n\r\nconst Login = ({handleSubmit, responseStatus, modal}) => {\r\n  const validateForm = useFormWithValidation();\r\n  const handleChangeEmail = (e) => {\r\n    validateForm.handleChange(e);\r\n  };\r\n\r\n  const handleChangePassword = (e) => {\r\n    validateForm.handleChange(e);\r\n  };\r\n  const submit = (e) => {\r\n    e.preventDefault();\r\n    handleSubmit(validateForm.values);\r\n  };\r\n  return (\r\n    <section className=\"login\">\r\n        <div className=\"content login__content\">\r\n          <form action=\"#\" name=\"login\" className=\"login__form\" onSubmit={submit}>\r\n            <NavLink to=\"/\" className=\"login__logo\">\r\n              <img src={logo} className=\"login__logo-img\" alt=\"logo\" />\r\n            </NavLink>\r\n            <fieldset className=\"login__fieldset\">\r\n              <legend>\r\n                <h2 className=\"login__title\">Рады видеть!</h2>\r\n              </legend>\r\n              <p className=\"login__input-title\">E-mail</p>\r\n              <input\r\n              type=\"email\"\r\n              className=\"login__input login__input_email\"\r\n              required\r\n              name=\"email\"\r\n              placeholder=\"Введите email\"\r\n              autoComplete=\"username\"\r\n              onChange={handleChangeEmail}\r\n              pattern=\"[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}\"\r\n              />\r\n              <span className=\"login__error login__error_email\">{validateForm.errors.email}</span>\r\n              <p className=\"login__input-title\">Пароль</p>\r\n              <input\r\n              type=\"password\"\r\n              className=\"login__input login__input_password\"\r\n              required\r\n              name=\"password\"\r\n              minLength=\"8\"\r\n              placeholder=\"Введите пароль\"\r\n              autoComplete=\"current-password\"\r\n              onChange={handleChangePassword}\r\n              />\r\n              <span className=\"login__error login__error_password\">{validateForm.errors.password}</span>\r\n            </fieldset>\r\n            <button type=\"submit\" disabled={`${validateForm.isValid ? '' : 'disabled'}`} className={`login__btn ${validateForm.isValid ? 'login__btn_active' : ''}`}>Войти</button>\r\n          </form>\r\n          <span className=\"login__signup-text\">Ещё не зарегистрированы?&nbsp;\r\n            <Link to=\"/signup\" className=\"login__signup-btn\">Регистрация</Link>\r\n          </span>\r\n        </div>\r\n        <Modal isActive={modal} responseStatus={responseStatus} />\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport logo from '../../images/logo.png'\r\nimport Modal from '../Modal/Modal';\r\nimport { useFormWithValidation } from '../Validator/Validator';\r\n\r\nconst Register = ({handleSubmit, modal, responseStatus}) => {\r\n  const validateForm = useFormWithValidation();\r\n  const handleChangeName = (e) => {\r\n    validateForm.handleChange(e);\r\n  };\r\n  const handleChangeEmail = (e) => {\r\n    validateForm.handleChange(e);\r\n  };\r\n  const handleChangePassword = (e) => {\r\n    validateForm.handleChange(e);\r\n  };\r\n  const submit = (e) => {\r\n    e.preventDefault();\r\n    handleSubmit(validateForm.values);\r\n  };\r\n  return (\r\n    <section className=\"register\">\r\n        <div className=\"content register__content\">\r\n          <form action=\"#\" name=\"register\" className=\"register__form\" onSubmit={submit} >\r\n            <img src={logo} className=\"register__logo-img\" alt=\"logo\" />\r\n            <fieldset className=\"register__fieldset\">\r\n              <legend>\r\n                <h2 className=\"register__title\">Добро пожаловать!</h2>\r\n              </legend>\r\n              <p className=\"register__input-title\">Имя</p>\r\n              <input\r\n              type=\"text\"\r\n              className=\"register__input register__input_name\"\r\n              required\r\n              placeholder=\"Введите имя\"\r\n              onChange={handleChangeName}\r\n              minLength=\"2\"\r\n              maxLength=\"30\"\r\n              name=\"name\"\r\n              />\r\n              <span className=\"register__error register__error_name\">{validateForm.errors.name}</span>\r\n              <p className=\"register__input-title\">E-mail</p>\r\n              <input\r\n              type=\"email\"\r\n              className=\"register__input register__input_email\"\r\n              required\r\n              placeholder=\"Введите email\"\r\n              autoComplete=\"username\"\r\n              onChange={handleChangeEmail}\r\n              name=\"email\"\r\n              pattern=\"[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}\"\r\n              />\r\n              <span className=\"register__error register__error_email\">{validateForm.errors.email}</span>\r\n              <p className=\"register__input-title\">Пароль</p>\r\n              <input\r\n              type=\"password\"\r\n              className=\"register__input register__input_password\"\r\n              required placeholder=\"Введите пароль\"\r\n              autoComplete=\"current-password\"\r\n              minLength=\"8\"\r\n              name=\"password\"\r\n              onChange={handleChangePassword}\r\n              />\r\n              <span className=\"register__error register__error_password\">{validateForm.errors.password}</span>\r\n            </fieldset>\r\n            <button type=\"submit\" disabled={`${validateForm.isValid ? '' : 'disabled'}`} className={`register__btn ${validateForm.isValid ? 'register__btn_active' : ''}`}>Зарегистрироваться</button>\r\n          </form>\r\n          <span className=\"register__signin-text\">Уже зарегистрированы?&nbsp;\r\n            <Link to=\"/signin\" className=\"register__signin-btn\">Войти</Link>\r\n          </span>\r\n        </div>\r\n        <Modal isActive={modal} responseStatus={responseStatus} />\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Register;","export const base_url = \"https://api.moviestavakai.nomoredomains.rocks\";\r\nexport const headers = {\r\n  Accept: \"application/json\",\r\n  \"Content-Type\": \"application/json\",\r\n};\r\n\r\nexport const register = (data) => {\r\n  return fetch(`${base_url}/signup`, {\r\n    method: 'POST',\r\n    headers: headers,\r\n    credentials: \"include\",\r\n    body: JSON.stringify({\r\n      email: data.email,\r\n      name: data.name,\r\n      password: data.password\r\n    })\r\n  })\r\n  .then(res => {\r\n    if (res.ok) {\r\n    return res;\r\n    }\r\n   return Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n  })\r\n};\r\n\r\nexport const authorize = (user) => {\r\n  return fetch(`${base_url}/signin`, {\r\n    method: 'POST',\r\n    headers: headers,\r\n    credentials: \"include\",\r\n    body: JSON.stringify({\r\n      email: user.email,\r\n      password: user.password\r\n    })\r\n  })\r\n  .then((response => response.json()))\r\n  .then((data) => {\r\n    if (data.token){\r\n      return data;\r\n    }\r\n  })\r\n};\r\n\r\nexport const logOut = () => {\r\n  return fetch(`${base_url}/signout`, {\r\n    method: 'POST',\r\n    headers: headers,\r\n    credentials: \"include\",\r\n  })\r\n  .then(res => _getResponseData(res))\r\n}\r\n\r\n// Получить данные пользователя\r\nexport const getUserProfile = () => {\r\n  return fetch(`${base_url}/users/me`, {\r\n    method: 'GET',\r\n    headers: headers,\r\n    credentials: 'include',\r\n    })\r\n    .then((res) => {\r\n      return _getResponseData(res)\r\n    })\r\n}\r\n// Получить сохраненные фильмы\r\nexport const getSavedItems = () => {\r\n  return fetch(`${base_url}/movies`, {\r\n    method: 'GET',\r\n      headers: headers,\r\n      credentials: 'include',\r\n    })\r\n    .then(res => {\r\n      return _getResponseData(res)\r\n    });\r\n}\r\n// Изменить профиль пользователя\r\nexport const doChangeUserInfo = (data) => {\r\n  return fetch(`${base_url}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: headers,\r\n      credentials: 'include',\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        email: data.email\r\n      })\r\n    })\r\n    .then(res => {\r\n      return _getResponseData(res)\r\n    })\r\n}\r\n// Создание нового фильма\r\nexport const addItem = (data) => {\r\n  return fetch(`${base_url}/movies`, {\r\n      method: 'POST',\r\n      headers: headers,\r\n      credentials: 'include',\r\n      body: JSON.stringify({\r\n        country: data.country,\r\n        director: data.director,\r\n        duration: data.duration,\r\n        year: data.year,\r\n        description: data.description,\r\n        image: data.image.url,\r\n        trailer: data.trailerLink,\r\n        nameRU: data.nameRU,\r\n        nameEN : data.nameEN,\r\n        thumbnail : data.image.formats.thumbnail.url,\r\n        id : data.id,\r\n      })\r\n    })\r\n    .then(res => {\r\n      return _getResponseData(res)\r\n    })\r\n}\r\n// Удаление фильма\r\nexport const removeItem = (id) => {\r\n  return fetch(`${base_url}/movies/${id}`, {\r\n      method: 'DELETE',\r\n      headers: headers,\r\n      credentials: 'include',\r\n    })\r\n    .then(res => {\r\n      return _getResponseData(res)\r\n    })\r\n}\r\n// Метод проверки ответа и преобразование в json\r\nexport const _getResponseData = (response) => {\r\n  if (!response.ok) {\r\n    return Promise.reject(`Ошибка: ${response.status}`);\r\n  }\r\n  return response.json();\r\n}\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n    {() =>\r\n      props.loggedIn === true ? <Component {...props} /> : <Redirect to='/' />\r\n    }\r\n  </Route>\r\n  )\r\n};\r\n\r\nexport default ProtectedRoute;","import React, { useState, useEffect } from \"react\";\nimport {\n  Route,\n  Switch,\n  useHistory,\n  useLocation,\n  Redirect,\n} from \"react-router-dom\";\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\nimport \"./App.css\";\nimport Profile from \"../Profile/Profile\";\nimport Login from \"../Login/Login\";\nimport Register from \"../Register/Register\";\nimport * as mainApi from \"../../utils/MainApi\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport Modal from \"../Modal/Modal\";\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState({\n    name: '',\n    email: ''\n  });\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [modal, setModal] = useState(false);\n  const [responseStatus, setResponseStatus] = useState(null);\n  const history = useHistory();\n  const location = useLocation();\n\n  // Регистрация пользователя\n  const handleSubmitReg = (data) => {\n    mainApi\n      .register(data)\n      .then((res) => {\n        if (res.status === 201) {\n          setLoggedIn(true);\n          mainApi.getUserProfile().then((res) => {\n            setCurrentUser(res);\n          });\n          history.push(\"/\");\n          setModal(true);\n          setResponseStatus(201);\n          setTimeout(() => {\n            setModal(false);\n          }, 4000);\n        }\n        return res.json();\n      })\n      .catch((err) => {\n        if (err.message === \"Ошибка: 409\") {\n          setModal(true);\n          setResponseStatus(409);\n          setTimeout(() => {\n            setModal(false);\n          }, 4000);\n        } else if (err.message === \"Ошибка: 400\") {\n          setModal(true);\n          setResponseStatus(400);\n          setTimeout(() => {\n            setModal(false);\n          }, 4000);\n        }\n      });\n  };\n  // Авторизация пользователя\n  const handleSubmitAuth = (data) => {\n    mainApi\n      .authorize(data)\n      .then((res) => {\n        if (res) {\n          setLoggedIn(true);\n          history.push(\"/\");\n          mainApi.getUserProfile().then((res) => {\n            setCurrentUser(res);\n          });\n        } else if (res === undefined) {\n          setModal(true);\n          setResponseStatus(401);\n          setTimeout(() => {\n            setModal(false);\n          }, 4000);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n  // Редактирование профиля\n  const handleEditProfile = (data) => {\n    mainApi\n      .doChangeUserInfo(data)\n      .then((res) => {\n        setCurrentUser(res);\n        setModal(true);\n        setResponseStatus(200);\n        setTimeout(() => {\n          setModal(false);\n        }, 4000);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n  // Выход из системы\n  const signOut = () => {\n    mainApi\n      .logOut()\n      .then((res) => {\n        setLoggedIn(false);\n        setCurrentUser({});\n        history.push(\"/signup\");\n      })\n      .catch((err) => {\n        return err;\n      });\n  };\n  // Начальная загрузка данных\n  useEffect(() => {\n    mainApi\n      .getUserProfile()\n      .then((res) => {\n        setCurrentUser(res);\n        setLoggedIn(true);\n        history.push(location.pathname);\n      })\n      .catch((err) => {\n        setLoggedIn(false);\n        history.push(\"/signin\");\n        return err;\n      })\n  }, []);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App\">\n        <div className=\"page\">\n          <Switch history={history}>\n            <ProtectedRoute\n              exact path=\"/\"\n              profileEditFn={handleEditProfile}\n              signOut={signOut}\n              loggedIn={loggedIn}\n              component={Profile}\n              modal={modal}\n              responseStatus={responseStatus}\n            />\n            <Route path=\"/signin\">\n              {loggedIn ? (\n                <Redirect to=\"/\" />\n              ) : (\n                <Login\n                  handleSubmit={handleSubmitAuth}\n                  modal={modal}\n                  responseStatus={responseStatus}\n                />\n              )}\n            </Route>\n            <Route path=\"/signup\">\n              {loggedIn ? (\n                <Redirect to=\"/\" />\n              ) : (\n                <Register\n                  handleSubmit={handleSubmitReg}\n                  modal={modal}\n                  responseStatus={responseStatus}\n                />\n              )}\n            </Route>\n            {loggedIn ? (\n                <Redirect to=\"/\" />\n              ) : (\n                <Redirect to=\"/signin\" />\n              )}\n          </Switch>\n          <Modal isActive={modal} responseStatus={responseStatus} />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter  } from \"react-router-dom\";\nimport './index.css';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter basename=\"/\">\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();"],"sourceRoot":""}